{% extends "network/layout.html" %}
{% load static %}
{% block body %}
<div class="container">
    {% if user.is_authenticated %}
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <div class="card-body">
              <form method="POST" id="compose-form">
          
                  <div class="form-group">
                      <label for="new_post">
                          <h4>New Post</h4>
                      </label>
                      <textarea name="new_post" id="new_post" class="form-control" rows="3" placeholder="What's on your mind?"></textarea>
                  </div>
                  <button type="submit" class="btn btn-primary mt-3">Post</button>
              </form>
              
          </div>
        </div>
      </div>
    </div>
    {% endif %} 
      <div id="posts-container"></div>
    
    </div>
    <div id="pagination-buttons"></div>
  
  {% endblock %}
  {% block script %}
  <script src="{% static 'network/script.js' %}"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
    document.querySelector('#compose-form').addEventListener('submit', compose_post);
    const allPostsLink = document.getElementById('following');

    // Add a click event listener
    allPostsLink.addEventListener('click', function (event) {
        event.preventDefault(); // Prevent the default link behavior

        // Call your function to load all posts or perform any action
        loadPage(1,'following'); 
     });

    // Load initial posts
    loadPage(1,'allpost');
});
  </script>
  {% endblock %}
